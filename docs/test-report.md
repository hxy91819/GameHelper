# 测试报告

## 测试环境

- 操作系统：Ubuntu 24.04（容器内）
- .NET SDK：8.0.414（`dotnet --info`）
- 执行命令：`dotnet test --logger "console;verbosity=detailed"`

## 模拟数据

- 配置文件通过内存数据源预先包含了如下示例游戏条目：`eldenring.exe`、`hades.exe` 与 `witcher3.exe`。
- 统计视图使用的游玩数据来自测试运行时生成的 CSV 文件，包含两条会话记录（GameOne 90 分钟、GameTwo 45 分钟），路径中的随机 GUID 为演示所截断。

## 控制台输出快照

```text
[Add Snapshot]
                          ____                              _   _          _
                         / ___|   __ _   _ __ ___     ___  | | | |   ___  | |  _ __     ___   _ __
                        | |  _   / _` | | '_ ` _ \   / _ \ | |_| |  / _ \ | | | '_ \   / _ \ | '__|
                        | |_| | | (_| | | | | | | | |  __/ |  _  | |  __/ | | | |_) | |  __/ | |
                         \____|  \__,_| |_| |_| |_|  \___| |_| |_|  \___| |_| | .__/   \___| |_|
                                                                              |_|
 ╭─功能概览─────────────────────────────────────────────────╮
 │ 💡 让流程更轻松：实时监控、自动 HDR、游戏时长统计        │
 │ ⚙️  快速管理配置：添加/修改/删除游戏，支持别名与 HDR 设置 │
 │ 🧪 诊断工具：一键转换旧版配置并验证当前 YAML             │
 ╰──────────────────────────────────────────────────────────╯
 ╭────────────┬───────────────────────────╮
 │ 当前上下文 │ 详情                      │
 ├────────────┼───────────────────────────┤
 │  配置文件  │ C:/configs/gamehelper.yml │
 │  日志级别  │ Information               │
 │  监控模式  │ WMI（配置文件）           │
 ╰────────────┴───────────────────────────╯
        输入序号或使用方向键选择功能，回车确认

 已保存：celeste.exe
 再见，祝你游戏愉快！

[Monitor Snapshot]
                          ____                              _   _          _
                         / ___|   __ _   _ __ ___     ___  | | | |   ___  | |  _ __     ___   _ __
                        | |  _   / _` | | '_ ` _ \   / _ \ | |_| |  / _ \ | | | '_ \   / _ \ | '__|
                        | |_| | | (_| | | | | | | | |  __/ |  _  | |  __/ | | | |_) | |  __/ | |
                         \____|  \__,_| |_| |_| |_|  \___| |_| |_|  \___| |_| | .__/   \___| |_|
                                                                              |_|
 ╭─功能概览─────────────────────────────────────────────────╮
 │ 💡 让流程更轻松：实时监控、自动 HDR、游戏时长统计        │
 │ ⚙️  快速管理配置：添加/修改/删除游戏，支持别名与 HDR 设置 │
 │ 🧪 诊断工具：一键转换旧版配置并验证当前 YAML             │
 ╰──────────────────────────────────────────────────────────╯
 ╭────────────┬──────────────────────────────────────────────────────────────────────╮
 │ 当前上下文 │ 详情                                                                 │
 ├────────────┼──────────────────────────────────────────────────────────────────────┤
 │  配置文件  │ /tmp/gh-tests/.../GameHelper/config.yml                               │
 │  日志级别  │ Information                                                          │
 │  监控模式  │ WMI（配置文件）                                                      │
 ╰────────────┴──────────────────────────────────────────────────────────────────────╯
                             输入序号或使用方向键选择功能，回车确认

 ── 实时监控 ────────────────────────────────────────────────────────────────────────────────────────────────────────────
 ╭─执行前确认─────────────────────────────────────────────────────────────────────────╮
 │ 将以 WMI（配置文件） 运行监控                                                      │
 │ 开始后可按 Ctrl + C 停止并返回桌面                                                 │
 │ 配置文件位置：/tmp/gh-tests/.../GameHelper/config.yml                               │
 │ 后台服务会自动加载启用的游戏列表进行白名单监控                                     │
 ╰────────────────────────────────────────────────────────────────────────────────────╯
 ╭─历史记录预览─────────────────────────────╮
 │ ╭────────────┬──────────────────┬──────╮ │
 │ │ 游戏       │ 结束时间         │ 时长 │ │
 │ ├────────────┼──────────────────┼──────┤ │
 │ │ 艾尔登法环 │ 2024-02-01 20:00 │ 1 h  │ │
 │ ╰────────────┴──────────────────┴──────╯ │
 │              最近 3 条记录               │
 ╰──────────────────────────────────────────╯

 正在启动监控... 按 Ctrl+C 可随时停止。

 监控已停止，正在汇总本次游玩...

 ╭────────────┬──────────────────┬──────────────────┬──────────╮
 │ 游戏       │ 开始             │ 结束             │ 本次时长 │
 ├────────────┼──────────────────┼──────────────────┼──────────┤
 │ 艾尔登法环 │ 2024-02-02 21:15 │ 2024-02-02 22:00 │ 45 min   │
 │            │                  │                  │          │
 │ TOTAL      │                  │                  │ 45 min   │
 ╰────────────┴──────────────────┴──────────────────┴──────────╯
 本次共计 1 次游戏结束：艾尔登法环 45 min（1 次）
 数据已写入：/tmp/gh-tests/.../GameHelper/playtime.csv

[Statistics Snapshot]
                          ____                              _   _          _
                         / ___|   __ _   _ __ ___     ___  | | | |   ___  | |  _ __     ___   _ __
                        | |  _   / _` | | '_ ` _ \   / _ \ | |_| |  / _ \ | | | '_ \   / _ \ | '__|
                        | |_| | | (_| | | | | | | | |  __/ |  _  | |  __/ | | | |_) | |  __/ | |
                         \____|  \__,_| |_| |_| |_|  \___| |_| |_|  \___| |_| | .__/   \___| |_|
                                                                              |_|
 ╭─功能概览─────────────────────────────────────────────────╮
 │ 💡 让流程更轻松：实时监控、自动 HDR、游戏时长统计        │
 │ ⚙️  快速管理配置：添加/修改/删除游戏，支持别名与 HDR 设置 │
 │ 🧪 诊断工具：一键转换旧版配置并验证当前 YAML             │
 ╰──────────────────────────────────────────────────────────╯
 ╭────────────┬──────────────────────────────────────────────────────────────────────╮
 │ 当前上下文 │ 详情                                                                 │
 ├────────────┼──────────────────────────────────────────────────────────────────────┤
 │  配置文件  │ /tmp/gh-tests/.../GameHelper/config.yml                               │
 │  日志级别  │ Information                                                          │
 │  监控模式  │ ETW（配置文件）                                                      │
 ╰────────────┴──────────────────────────────────────────────────────────────────────╯
                             输入序号或使用方向键选择功能，回车确认

 ── 游戏时长统计 ────────────────────────────────────────────────────────────────────────────────────────────────────────
 ╭──────────┬────────┬────────┬────────╮
 │ 游戏     │ 总时长 │ 近两周 │ 会话数 │
 ├──────────┼────────┼────────┼────────┤
 │ 冒险一号 │ 1.5 h  │ 1.5 h  │ 1      │
 │ 试炼二号 │ 45 min │ 45 min │ 1      │
 │          │        │        │        │
 │ TOTAL    │ 2.3 h  │ 2.3 h  │ 2      │
 ╰──────────┴────────┴────────┴────────╯
 数据来源：/tmp/gh-tests/.../GameHelper/playtime.csv
 再见，祝你游戏愉快！

[Configuration Snapshot]
                          ____                              _   _          _
                         / ___|   __ _   _ __ ___     ___  | | | |   ___  | |  _ __     ___   _ __
                        | |  _   / _` | | '_ ` _ \   / _ \ | |_| |  / _ \ | | | '_ \   / _ \ | '__|
                        | |_| | | (_| | | | | | | | |  __/ |  _  | |  __/ | | | |_) | |  __/ | |
                         \____|  \__,_| |_| |_| |_|  \___| |_| |_|  \___| |_| | .__/   \___| |_|
                                                                              |_|
 ╭─功能概览─────────────────────────────────────────────────╮
 │ 💡 让流程更轻松：实时监控、自动 HDR、游戏时长统计        │
 │ ⚙️  快速管理配置：添加/修改/删除游戏，支持别名与 HDR 设置 │
 │ 🧪 诊断工具：一键转换旧版配置并验证当前 YAML             │
 ╰──────────────────────────────────────────────────────────╯
 ╭────────────┬───────────────────────────╮
 │ 当前上下文 │ 详情                      │
 ├────────────┼───────────────────────────┤
 │  配置文件  │ C:/configs/gamehelper.yml │
 │  日志级别  │ Debug（命令行启用）       │
 │  监控模式  │ ETW（配置文件）           │
 ╰────────────┴───────────────────────────╯
        输入序号或使用方向键选择功能，回车确认

 ── 当前配置 ────────────────────────────────────────────────────────────────────────────────────────────────────────────
 ╭───────────────┬────────────┬────────┬──────────╮
 │ 可执行文件    │ 显示名称   │ 自动化 │ HDR      │
 ├───────────────┼────────────┼────────┼──────────┤
 │ eldenring.exe │ Elden Ring │ 启用   │ 开启     │
 │ hades.exe     │ Hades      │ 禁用   │ 保持关闭 │
 ╰───────────────┴────────────┴────────┴──────────╯
 再见，祝你游戏愉快！
```

